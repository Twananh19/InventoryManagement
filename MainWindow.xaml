<Window x:Class="GoodManagement.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:views="clr-namespace:GoodManagement.Views"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        Background="#F5F5F5"
        FontFamily="{DynamicResource MaterialDesignFont}"
        Title="Hệ thống Quản lý Kho hàng" 
        Height="750" Width="1400"
        MinHeight="600" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">
    
    <Window.Resources>
        <!-- View Templates -->
        <DataTemplate x:Key="DashboardViewTemplate">
            <views:DashboardView DataContext="{Binding DashboardViewModel}"/>
        </DataTemplate>
        
        <DataTemplate x:Key="ProductsViewTemplate">
            <views:ProductsView DataContext="{Binding ProductViewModel}"/>
        </DataTemplate>
        
        <DataTemplate x:Key="InventoryViewTemplate">
            <views:InventoryView DataContext="{Binding InventoryViewModel}"/>
        </DataTemplate>
        
        <DataTemplate x:Key="InboundViewTemplate">
            <views:InboundView DataContext="{Binding InboundViewModel}"/>
        </DataTemplate>
        
        <DataTemplate x:Key="OutboundViewTemplate">
            <views:OutboundView DataContext="{Binding OutboundViewModel}"/>
        </DataTemplate>
        
        <DataTemplate x:Key="ReportsViewTemplate">
            <views:ReportsView DataContext="{Binding ReportsViewModel}"/>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar Navigation -->
        <Border Grid.Column="0" Background="{DynamicResource PrimaryHueDarkBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="{DynamicResource PrimaryHueMidBrush}" 
                       Padding="25,30">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="Warehouse" 
                                                Width="50" Height="50"
                                                Foreground="White"
                                                HorizontalAlignment="Center"/>
                        <TextBlock Text="QUẢN LÝ KHO" 
                                  FontSize="20" 
                                  FontWeight="Bold" 
                                  Foreground="White" 
                                  HorizontalAlignment="Center"
                                  Margin="0,15,0,0"/>
                        <TextBlock Text="{Binding CurrentUser.Username, StringFormat='👤 {0}'}" 
                                  FontSize="14" 
                                  Foreground="White" 
                                  Opacity="0.9"
                                  HorizontalAlignment="Center"
                                  Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Menu -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="0,20,0,0">
                        <!-- Dashboard -->
                        <Button Command="{Binding NavigateToDashboardCommand}" 
                               Height="55" 
                               Margin="15,5"
                               HorizontalContentAlignment="Left" 
                               Padding="20,0"
                               Foreground="White"
                               BorderThickness="0">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentView}" Value="Dashboard">
                                            <Setter Property="Background" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ViewDashboard" 
                                                        Width="24" Height="24"
                                                        VerticalAlignment="Center"
                                                        Margin="0,0,15,0"/>
                                <TextBlock Text="Tổng quan" 
                                          FontSize="15"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Products -->
                        <Button Command="{Binding NavigateToProductsCommand}" 
                               Height="55" 
                               Margin="15,5"
                               HorizontalContentAlignment="Left" 
                               Padding="20,0"
                               Foreground="White"
                               BorderThickness="0">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentView}" Value="Products">
                                            <Setter Property="Background" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Package" 
                                                        Width="24" Height="24"
                                                        VerticalAlignment="Center"
                                                        Margin="0,0,15,0"/>
                                <TextBlock Text="Quản lý sản phẩm" 
                                          FontSize="15"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Inventory -->
                        <Button Command="{Binding NavigateToInventoryCommand}" 
                               Height="55" 
                               Margin="15,5"
                               HorizontalContentAlignment="Left" 
                               Padding="20,0"
                               Foreground="White"
                               BorderThickness="0">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentView}" Value="Inventory">
                                            <Setter Property="Background" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Warehouse" 
                                                        Width="24" Height="24"
                                                        VerticalAlignment="Center"
                                                        Margin="0,0,15,0"/>
                                <TextBlock Text="Tồn kho" 
                                          FontSize="15"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Inbound -->
                        <Button Command="{Binding NavigateToInboundCommand}" 
                               Height="55" 
                               Margin="15,5"
                               HorizontalContentAlignment="Left" 
                               Padding="20,0"
                               Foreground="White"
                               BorderThickness="0">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentView}" Value="Inbound">
                                            <Setter Property="Background" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="TruckDelivery" 
                                                        Width="24" Height="24"
                                                        VerticalAlignment="Center"
                                                        Margin="0,0,15,0"/>
                                <TextBlock Text="Nhập hàng" 
                                          FontSize="15"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Outbound -->
                        <Button Command="{Binding NavigateToOutboundCommand}" 
                               Height="55" 
                               Margin="15,5"
                               HorizontalContentAlignment="Left" 
                               Padding="20,0"
                               Foreground="White"
                               BorderThickness="0">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentView}" Value="Outbound">
                                            <Setter Property="Background" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="TruckFast" 
                                                        Width="24" Height="24"
                                                        VerticalAlignment="Center"
                                                        Margin="0,0,15,0"/>
                                <TextBlock Text="Xuất hàng" 
                                          FontSize="15"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Reports -->
                        <Button Command="{Binding NavigateToReportsCommand}" 
                               Height="55" 
                               Margin="15,5"
                               HorizontalContentAlignment="Left" 
                               Padding="20,0"
                               Foreground="White"
                               BorderThickness="0">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentView}" Value="Reports">
                                            <Setter Property="Background" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ChartBox" 
                                                        Width="24" Height="24"
                                                        VerticalAlignment="Center"
                                                        Margin="0,0,15,0"/>
                                <TextBlock Text="Báo cáo &amp; Thống kê" 
                                          FontSize="15"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </ScrollViewer>

                <!-- Bottom Actions -->
                <StackPanel Grid.Row="2" Margin="15,15,15,25">
                    <Separator Background="White" Opacity="0.2" Margin="0,0,0,15"/>
                    
                    <!-- Refresh -->
                    <Button Command="{Binding RefreshDataCommand}" 
                           Height="45" 
                           HorizontalContentAlignment="Left" 
                           Padding="20,0"
                           Foreground="White"
                           Style="{StaticResource MaterialDesignFlatButton}"
                           ToolTip="Làm mới dữ liệu"
                           Margin="0,0,0,10">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Refresh" 
                                                    Width="22" Height="22"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,12,0"/>
                            <TextBlock Text="Làm mới" 
                                      FontSize="14"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <!-- Logout -->
                    <Button Command="{Binding LogoutCommand}" 
                           Height="50"
                           HorizontalContentAlignment="Left" 
                           Padding="20,0"
                           Background="#D32F2F"
                           BorderBrush="#D32F2F"
                           Foreground="White"
                           Style="{StaticResource MaterialDesignRaisedButton}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Logout" 
                                                    Width="22" Height="22"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,12,0"/>
                            <TextBlock Text="Đăng xuất" 
                                      FontSize="14"
                                      FontWeight="SemiBold"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Border Grid.Column="1" Background="#F5F5F5">
            <ContentControl Content="{Binding}">
                <ContentControl.Style>
                    <Style TargetType="ContentControl">
                        <Setter Property="ContentTemplate" Value="{StaticResource DashboardViewTemplate}"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CurrentView}" Value="Products">
                                <Setter Property="ContentTemplate" Value="{StaticResource ProductsViewTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CurrentView}" Value="Inventory">
                                <Setter Property="ContentTemplate" Value="{StaticResource InventoryViewTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CurrentView}" Value="Inbound">
                                <Setter Property="ContentTemplate" Value="{StaticResource InboundViewTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CurrentView}" Value="Outbound">
                                <Setter Property="ContentTemplate" Value="{StaticResource OutboundViewTemplate}"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding CurrentView}" Value="Reports">
                                <Setter Property="ContentTemplate" Value="{StaticResource ReportsViewTemplate}"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ContentControl.Style>
            </ContentControl>
        </Border>
    </Grid>
</Window>
